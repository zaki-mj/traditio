import 'dart:async';
import 'package:flutter/foundation.dart';
import 'package:flutter/material.dart';

class AppLocalizations {
  final Locale locale;

  AppLocalizations(this.locale);

  static const Map<String, Map<String, String>> _translations = {
    'en': {
      'app_title': 'Traditional Gems',
      'welcome': 'Welcome to Traditional Gems',
      'start_discovering': 'Start Discovering',
      'admin_login': 'Admin Login',
      'discover_page': 'Discover',
      'admin_page': 'Admin Login (placeholder)',
      'search_hint': 'Search places, e.g., "hotel" or "Cairo"',
      'recommended': 'Recommended',
      'all_places': 'All Places',
      'settings': 'Settings',
      'settings_title': 'Settings',
      'change_theme': 'Change Theme',
      'change_language': 'Change Language',
      'type_hotel': 'Hotel',
      'type_restaurant': 'Restaurant',
      'type_attraction': 'Attraction',
      'no_results': 'No places match your filters',
      'type_store': 'Stores',
      'type_other': 'Everything Else',
      'about_us': 'About Us',
      'logout': 'Logout',
      'admin_panel': 'Admin Panel',
      'guest': 'Guest',
      'dashboard': 'Dashboard',
      'places': 'Places',
      'home': 'Home',
      'categories': 'Categories',
      'favorites': 'Favorites',
      'artists': 'Artists',
      'favorites_cleared': 'Favorites cleared',
      'add_new_place': 'Add new place',
      'search_places': 'Search places...',
      'all_types': 'All Types',
      'total_places': 'Total Places',
      'average_rating': 'Average Rating',
      'by_type': 'By Type',
      'by_location': 'By Location',
      'hotels': 'Hotels',
      'restaurants': 'Restaurants',
      'attractions': 'Attractions',
      'no_places_found': 'No places found',
      'edit': 'Edit',
      'delete': 'Delete',
      'clear_filters': 'Clear Filters',
      'search': 'Search',
      'dark_mode': 'Dark Mode',
      'clear_all_favorites': 'Clear All Favorites',
      'light_mode': 'Light Mode',
      'cancel': 'Cancel',
      'contact': 'Contact',
      'social': 'Social Media',
      'address': 'Address',
      'open_map': 'Open Map',
      'phone': 'Phone',
      'email': 'Email',
      'about': 'About',
      'slogan': 'Discover traditional places in Algeria',
      'about_title': 'About Traditional Gems',
      'about_description': 'Traditional Gems is an app dedicated to discovering and exploring traditional and cultural places across Algeria. Our mission is to help you find authentic experiences and preserve cultural heritage.',
      'technical_details': 'Technical Details',
      'app_version': 'Version',
      'app_version_number': '0.4.1',
      'developed_with': 'Developed With',
      'credits': 'Credits',
      'idea_by': 'Idea By',
      'benaissa_ikram': 'Ben Aissa Ikram',
      'developed_by': 'Developed By',
      'medjdoub_zakaria': 'Medjdoub Zakaria',
      'login_title': 'Admin Login',
      'password': 'Password',
      'login_button': 'Login',
      'welcome_description': 'Discover traditional touristic places: hotels, restaurants and more.',
      'forgot_password': 'Forgot password?',
      'contact_developer': 'Please contact the developer',
      'switch_to_light_mode': 'Switch to light mode',
      'switch_to_dark_mode': 'Switch to dark mode',
      'reset_filters_description': 'Reset all search filters and preferences to default.',
      'clear_favorites_description': 'Remove all saved favorites from the app. This action cannot be undone.',
      'confirm_clear_favorites': 'Are you sure you want to clear all favorites?',
      'filters_cleared_successfully': 'Filters cleared successfully',
      'please_fill_required_fields': 'Please fill in all required fields',
      'place_created_successfully': 'Place created successfully!',
      'place_updated_successfully': 'Place updated successfully!',
      'edit_place': 'Edit Place',
      'create_place': 'Create Place',
      'basic_information': 'Basic Information',
      'name_label': 'Name *',
      'description_label': 'Description *',
      'type_label': 'Type *',
      'link_not_available': 'Link not available',
      'invalid_link': 'Invalid link',
      'could_not_open_link': 'Could not open the link',
      'failed_to_launch': 'Failed to launch: {error}',
      'no_favorites_yet': 'No favorites yet',
      'add_to_rec': 'Add to Recommended',
      'added_to_recommended': '{name} added to recommended',
      'delete_place': 'Delete Place',
      'confirm_delete_place': 'Are you sure you want to delete "{name}"?',
      'place_deleted': '{name} deleted',
      'manage_recommended': 'Manage Recommended',
      'stores': 'Stores',
      'other': 'Other',
      'location': 'Location',
      'total': 'Total',
      'recommended_list': 'Recommended List',
      'drag_to_reorder': 'Drag to reorder',
      'search_results': 'Search Results',
      'by_wilaya': 'By Wilaya',
      "search_filter": "Search & Filter",
      "filter_results": "Filter Results",
      "search_by_name": "Search by name or description",
      "select_location": "Select Location",
      "select_type": "Select Type",
      "active_filters": "Active Filters",
      "no_filters_applied": "No filters applied",
      "results_found": "Results found",
      "showing_results": "Showing {count} results",
      "all_locations": "All Locations",

      "invalid_email": "Please enter a valid email address",
      "password_too_short": "Password must be at least 6 characters",
      "user_not_found": "User not found. Please check your email.",
      "wrong_password": "Wrong password. Please try again.",
      "login_error": "Login failed. Please try again.",
      "see_all": "See all",
      "featured_artists": "Featured Artists",
    },
    'ar': {
      'app_title': 'جواهر تقليدية',
      'welcome': 'مرحبًا بك في جواهر تقليدية',
      'start_discovering': 'ابدأ الاكتشاف',
      'admin_login': 'دخول المسؤول',
      'discover_page': 'الاكتشاف',
      'admin_page': 'دخول المسؤول (عنصر نائب)',
      'search_hint': 'ابحث عن أماكن، مثلاً "فندق" أو "القاهرة"',
      'recommended': 'موصى به',
      'all_places': 'جميع الأماكن',
      'settings': 'الإعدادات',
      'settings_title': 'الإعدادات',
      'change_theme': 'تغيير المظهر',
      'change_language': 'تغيير اللغة',
      'type_hotel': 'فندق',
      'type_restaurant': 'مطعم',
      'type_attraction': 'معلم',
      'no_results': 'لا توجد أماكن تطابق عوامل التصفية',
      'type_store': 'متاجر',
      'type_other': 'كل شيء آخر',
      'about_us': 'من نحن',
      'logout': 'تسجيل الخروج',
      'admin_panel': 'لوحة المسؤول',
      'guest': 'ضيف',
      'dashboard': 'لوحة التحكم',
      'places': 'الأماكن',
      'home': 'الرئيسية',
      'categories': 'الفئات',
      'favorites': 'المفضلات',
      'artists': 'الفنانون',
      'favorites_cleared': 'تم مسح المفضلات',
      'add_new_place': 'إضافة مكان جديد',
      'search_places': 'ابحث عن الأماكن...',
      'all_types': 'جميع الأنواع',
      'total_places': 'إجمالي الأماكن',
      'average_rating': 'متوسط التقييم',
      'by_type': 'حسب النوع',
      'by_location': 'حسب الموقع',
      'hotels': 'الفنادق',
      'restaurants': 'المطاعم',
      'attractions': 'المعالم السياحية',
      'no_places_found': 'لم يتم العثور على أماكن',
      'edit': 'تعديل',
      'delete': 'حذف',
      'clear_filters': 'مسح المرشحات',
      'search': 'بحث',
      'dark_mode': 'الوضع الليلي',
      'clear_all_favorites': 'مسح جميع المفضلات',
      'light_mode': 'الوضع النهاري',
      'cancel': 'إلغاء',
      'contact': 'جهات الاتصال',
      'social': 'وسائل التواصل الاجتماعي',
      'address': 'العنوان',
      'open_map': 'فتح الخريطة',
      'phone': 'هاتف',
      'email': 'بريد إلكتروني',
      'about': 'حول',
      'slogan': 'اكتشف الأماكن التقليدية في الجزائر',
      'about_title': 'حول جواهر تقليدية',
      'about_description': 'جواهر تقليدية هو تطبيق مخصص لاكتشاف واستكشاف الأماكن التقليدية والثقافية عبر الجزائر. مهمتنا هي مساعدتك في العثور على تجارب أصلية والحفاظ على التراث الثقافي.',
      'technical_details': 'التفاصيل التقنية',
      'app_version': 'الإصدار',
      'app_version_number': '0.4.1',
      'developed_with': 'تم التطوير باستخدام',
      'credits': 'الفريق',
      'idea_by': 'الفكرة من',
      'benaissa_ikram': 'بن عيسى اكرام',
      'developed_by': 'تطوير',
      'medjdoub_zakaria': 'مجدوب زكريا',
      'login_title': 'دخول المسؤول',
      'password': 'كلمة المرور',
      'login_button': 'دخول',
      'welcome_description': 'اكتشف أماكن سياحية تقليدية: فنادق، مطاعم والمزيد.',
      'forgot_password': 'هل نسيت كلمة المرور؟',
      'contact_developer': 'يرجى الاتصال بالمطور',
      'switch_to_light_mode': 'التبديل إلى الوضع النهاري',
      'switch_to_dark_mode': 'التبديل إلى الوضع الليلي',
      'reset_filters_description': 'إعادة جميع مرشحات البحث والتفضيلات إلى الافتراضي.',
      'clear_favorites_description': 'إزالة جميع المفضلات المحفوظة من التطبيق. هذا الإجراء لا يمكن التراجع عنه.',
      'confirm_clear_favorites': 'هل أنت متأكد أنك تريد مسح جميع المفضلات؟',
      'filters_cleared_successfully': 'تم مسح عوامل التصفية بنجاح',
      'please_fill_required_fields': 'يرجى ملء جميع الحقول المطلوبة',
      'place_created_successfully': 'تم إنشاء المكان بنجاح!',
      'place_updated_successfully': 'تم تحديث المكان بنجاح!',
      'edit_place': 'تعديل المكان',
      'create_place': 'إنشاء مكان',
      'basic_information': 'معلومات أساسية',
      'name_label': 'الاسم *',
      'description_label': 'الوصف *',
      'type_label': 'النوع *',
      'link_not_available': 'الرابط غير متوفر',
      'invalid_link': 'رابط غير صالح',
      'could_not_open_link': 'تعذر فتح الرابط',
      'failed_to_launch': 'فشل في الفتح: {error}',
      'no_favorites_yet': 'لا توجد مفضلات بعد',
      'add_to_rec': 'أضف إلى الموصى به',
      'added_to_recommended': 'تمت إضافة {name} إلى الموصى به',
      'delete_place': 'حذف المكان',
      'confirm_delete_place': 'هل أنت متأكد أنك تريد حذف "{name}"؟',
      'place_deleted': 'تم حذف {name}',
      'manage_recommended': 'إدارة الأماكن الموصى بها',

      'stores': 'متاجر',
      'other': 'أخرى',

      'location': 'الموقع',
      'recommended_list': 'قائمة الموصى بهم',
      'drag_to_reorder': 'اسحب لإعادة الترتيب',
      'search_results': 'نتائج البحث',
      'by_wilaya': 'حسب الولاية',
      "search_filter": "البحث والتصفية",
      "filter_results": "تصفية النتائج",
      "search_by_name": "ابحث بالاسم أو الوصف",
      "select_location": "اختر الموقع",
      "select_type": "اختر النوع",
      "active_filters": "المرشحات النشطة",
      "no_filters_applied": "لم يتم تطبيق مرشحات",
      "results_found": "تم العثور على نتائج",
      "showing_results": "عرض {count} النتائج",
      "all_locations": "جميع المواقع",

      "invalid_email": "يرجى إدخال عنوان بريد إلكتروني صحيح",
      "password_too_short": "يجب أن تكون كلمة المرور 6 أحرف على الأقل",
      "user_not_found": "لم يتم العثور على المستخدم. يرجى التحقق من بريدك الإلكتروني.",
      "wrong_password": "كلمة مرور خاطئة. يرجى المحاولة مرة أخرى.",
      "login_error": "فشل تسجيل الدخول. يرجى المحاولة مرة أخرى.",
      "see_all": "عرض الكل",
      "featured_artists": "الفنانون المميزون",
    },
    'fr': {
      'app_title': 'Trésors Traditionnels',
      'welcome': 'Bienvenue à Trésors Traditionnels',
      'start_discovering': 'Commencer à Découvrir',
      'admin_login': 'Connexion Admin',
      'discover_page': 'Découvrir',
      'admin_page': 'Connexion Admin (placeholder)',
      'search_hint': 'Recherchez des lieux, par ex. "hôtel" ou "Le Caire"',
      'recommended': 'Recommandé',
      'all_places': 'Tous les Lieux',
      'settings': 'Paramètres',
      'settings_title': 'Paramètres',
      'change_theme': 'Changer le Thème',
      'change_language': 'Changer la Langue',
      'type_hotel': 'Hôtel',
      'type_restaurant': 'Restaurant',
      'type_attraction': 'Attraction',
      'no_results': 'Aucun lieu ne correspond à vos filtres',
      'type_store': 'Magasins',
      'type_other': 'Autre',
      'about_us': 'À Propos de Nous',
      'logout': 'Déconnexion',
      'admin_panel': 'Panneau d\'Administration',
      'guest': 'Invité',
      'dashboard': 'Tableau de Bord',
      'places': 'Lieux',
      'add_new_place': 'Ajouter un nouveau lieu',
      'artists': 'Artistes',
      'search_places': 'Rechercher des lieux...',
      'all_types': 'Tous les Types',
      'total_places': 'Total des Lieux',
      'average_rating': 'Note Moyenne',
      'by_type': 'Par Type',
      'by_location': 'Par Localisation',
      'hotels': 'Hôtels',
      'restaurants': 'Restaurants',
      'attractions': 'Attractions',
      'no_places_found': 'Aucun lieu trouvé',
      'edit': 'Modifier',
      'delete': 'Supprimer',
      'clear_filters': 'Effacer les Filtres',
      'search': 'Rechercher',
      'dark_mode': 'Mode Sombre',
      'clear_all_favorites': 'Effacer Tous les Favoris',
      'light_mode': 'Mode Clair',
      'cancel': 'Annuler',
      'contact': 'Contact',
      'social': 'Réseaux Sociaux',
      'address': 'Adresse',
      'open_map': 'Ouvrir la Carte',
      'phone': 'Téléphone',
      'email': 'E-mail',
      'about': 'À Propos',
      'slogan': 'Découvrez des lieux traditionnels en Algérie',
      'about_title': 'À Propos de Trésors Traditionnels',
      'about_description': 'Trésors Traditionnels est une application dédiée à la découverte et l\'exploration des lieux traditionnels et culturels en Algérie. Notre mission est de vous aider à trouver des expériences authentiques et de préserver le patrimoine culturel.',
      'technical_details': 'Détails Techniques',
      'app_version': 'Version',
      'app_version_number': '0.4.1',
      'developed_with': 'Développé Avec',
      'credits': 'Crédits',
      'idea_by': 'Idée Par',
      'benaissa_ikram': 'Ben Aissa Ikram',
      'developed_by': 'Développé Par',
      'medjdoub_zakaria': 'Medjdoub Zakaria',
      'login_title': 'Connexion Admin',
      'password': 'Mot de Passe',
      'login_button': 'Connexion',
      'welcome_description': 'Découvrez des lieux touristiques traditionnels : hôtels, restaurants et plus.',
      'forgot_password': 'Mot de passe oublié ?',
      'contact_developer': 'Veuillez contacter le développeur',
      'switch_to_light_mode': 'Basculer en mode clair',
      'switch_to_dark_mode': 'Basculer en mode sombre',
      'reset_filters_description': 'Réinitialiser tous les filtres de recherche et préférences par défaut.',
      'clear_favorites_description': 'Supprimer tous les favoris enregistrés dans l\'application. Cette action est irréversible.',
      'confirm_clear_favorites': 'Êtes-vous sûr de vouloir supprimer tous les favoris ?',
      'filters_cleared_successfully': 'Filtres effacés avec succès',
      'please_fill_required_fields': 'Veuillez remplir tous les champs requis',
      'place_created_successfully': 'Lieu créé avec succès !',
      'place_updated_successfully': 'Lieu mis à jour avec succès !',
      'edit_place': 'Modifier le lieu',
      'create_place': 'Créer un lieu',
      'basic_information': 'Informations de base',
      'name_label': 'Nom *',
      'description_label': 'Description *',
      'type_label': 'Type *',
      'link_not_available': 'Lien non disponible',
      'invalid_link': 'Lien invalide',
      'could_not_open_link': 'Impossible d\'ouvrir le lien',
      'failed_to_launch': 'Échec de l\'ouverture : {error}',
      'no_favorites_yet': 'Pas de favoris pour le moment',
      'add_to_rec': 'Ajouter aux recommandés',
      'added_to_recommended': '{name} ajouté aux recommandés',
      'delete_place': 'Supprimer le lieu',
      'confirm_delete_place': 'Voulez-vous vraiment supprimer "{name}" ?',
      'place_deleted': '{name} supprimé',
      'search_results': 'Résultats de Recherche',
      'by_wilaya': 'Par Wilaya',
      "search_filter": "Recherche et filtre",
      "filter_results": "Filtrer les résultats",
      "search_by_name": "Rechercher par nom ou description",
      "select_location": "Sélectionner l'emplacement",
      "select_type": "Sélectionner le type",
      "active_filters": "Filtres actifs",
      "no_filters_applied": "Aucun filtre appliqué",
      "results_found": "Résultats trouvés",
      "showing_results": "Affichage de {count} résultats",
      "all_locations": "Tous les emplacements",

      "invalid_email": "Veuillez entrer une adresse e-mail valide",
      "password_too_short": "Le mot de passe doit contenir au moins 6 caractères",
      "user_not_found": "Utilisateur non trouvé. Veuillez vérifier votre adresse e-mail.",
      "wrong_password": "Mot de passe incorrect. Veuillez réessayer.",
      "login_error": "Échec de la connexion. Veuillez réessayer.",
      "is_required": "est requis",
      "login_successful": "Connexion réussie",
      "see_all": "Voir tout",
      "featured_artists": "Artistes en vedette",
    },
  };

  String translate(String key) {
    return _translations[locale.languageCode]?[key] ?? _translations['ar']?[key] ?? key;
  }

  static const LocalizationsDelegate<AppLocalizations> delegate = _AppLocalizationsDelegate();

  static List<Locale> get supportedLocales => const [Locale('ar'), Locale('en'), Locale('fr')];
}

class _AppLocalizationsDelegate extends LocalizationsDelegate<AppLocalizations> {
  const _AppLocalizationsDelegate();

  @override
  bool isSupported(Locale locale) => ['en', 'ar', 'fr'].contains(locale.languageCode);

  @override
  Future<AppLocalizations> load(Locale locale) {
    // As this is a tiny synchronous map-based loader, we can return immediate
    return SynchronousFuture<AppLocalizations>(AppLocalizations(locale));
  }

  @override
  bool shouldReload(covariant LocalizationsDelegate<AppLocalizations> old) => false;
}
